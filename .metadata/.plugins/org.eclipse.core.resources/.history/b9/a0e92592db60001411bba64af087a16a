<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="cn.gyyx.test.humingyuan.dao.IUserLog">
  	<resultMap type="UserLogInfo" id="OperateDBLogResultMap">
  		<result property="code" column="code" />
  		<result property="beginTime" column="begin_time" />
  		<result property="endTime" column="end_time" />
  		<result property="timeSpan" column="time_span" />
  		<result property="ip" column="ip" />
  	</resultMap>
  	<insert id="insertUserLog" parameterType="UserLogInfo">
  		insert into humingyuan_operate_log_tb (begin_time,ip)
  		values (#{beginTime},#{ip})
  		<selectKey resultType="Integer" keyProperty="code"
			keyColumn="code" order="AFTER">
			select @@identity as code
		</selectKey>
	</insert>

  	<update id="updateUserLog" parameterType="UserLogInfo">
  		update humingyuan_operate_log_tb 
  		<set>
  			[begin_time]=#{beginTime},
  			[end_time]=#{endTime},
  			[time_span]=#{timeSpan},
  			[ip]=#{ip}
  		</set>
  		where code=#{code}
  	</update>
  </mapper>